alias l='ls -lAh'

# Rails
alias rconsole='script/rails console'
alias rmigrate='rake db:migrate db:test:clone'
alias rdevlog='tail -f log/development.log'

# show and hide files from Finder
alias hide="SetFile -a V"
alias show="SetFile -a v"

# Show full history
alias history='fc -l 1'

if [[ -f /Library/Application\ Support/VMware\ Fusion/vmrun ]]; then
  function fusion () {
    /Library/Application\ Support/VMware\ Fusion/vmrun -T fusion $@ nogui
  }
fi

if [[ -r /Applications/MacVim.app ]]; then
  function mvim() {
    local files; files=()
    local skip; skip=false
    local no_fork; no_fork=true

    # Convert all filenames to absolute paths because the cwd is lost using open
    for file; do
      if [[ $skip == true ]]; then
        skip = false
      else
        case "$file" in
          (-c|+) files+=($file); skip=true;;
          (-f|--no-fork) files+=($file); no_fork=true;;
          -*) files+=($file);;
          (/*|-d) files+=($file);;
          *) files+=("$PWD/$file");;
        esac
      fi
    done

    if [[ $no_fork == true ]]; then
      /Applications/MacVim.app/Contents/MacOS/Vim -g $files
    else
      open -a /Applications/MacVim.app $files
    fi
  }
fi

# Create a tmux session if there isn't one to attach to
alias tmux="tmux attach-session"

# vim: filetype=zsh
