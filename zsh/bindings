# Use vi keybindings to edit command line
bindkey -v

# Make backspace work
bindkey '^?' backward-delete-char
bindkey '^H' backward-delete-char

# Setup undo redo in cmd
bindkey -M vicmd '^r' redo
bindkey -M vicmd 'u' undo

# Make sure that C-M vicmd and C-e do the appropriate things
# Discovered this when using zsh inside a tmux that was inside
# another tmux. It would just print ^A or ^E instead of doing
# the action
bindkey '^A' beginning-of-line
bindkey '^E' end-of-line

# Make C-e and C-M vicmd goto insert mode from command
bindkey -M vicmd '^A' vi-insert-bol
bindkey -M vicmd '^E' vi-add-eol

# Alias C-n and C-p to up and down arrow
bindkey '^P' history-beginning-search-backward
bindkey '^N' history-beginning-search-forward

# Make autocomplete cycling work like in vim
bindkey -M menuselect '^N' reverse-menu-complete
bindkey -M menuselect '^P' menu-complete

# Make G go to the end of history
bindkey -M vicmd 'G' end-of-history

# Make Y like D and C
bindkey -M vicmd 'Y' vi-yank-eol

# Expansion of history
bindkey ' ' magic-space

# Allow editing a command inside the editor
autoload -U edit-command-line
zle -N edit-command-line
bindkey '^X^E' edit-command-line

# Better movement on the line
# bindkey '^b' backward-word
# bindkey '^f' forward-word
# bindkey '^d' delete-word
# bindkey '^u' kill-whole-line

# Insert literal characters
bindkey -M viins '^v' vi-quoted-insert
bindkey -M vicmd 'cru' up-case-word

# Make it really simple to forground that last suspended process before last
# This makes it real simple to suspend vim, resume something else, suspend it and resume vim
bindkey -s '^f' ' fg %-'

# Much quicker switch to vicmd mode
# It will remove all bindings that start with  except the one that is 
bindkey -rpM viins '^['

# vim: ft=zsh
